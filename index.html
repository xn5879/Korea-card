<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TOPIK 1000 çµ‚æ¥µå–®å­—å¡</title>
    <style>
        :root {
            --bg-color: #0f172a;
            --card-bg: #1e293b;
            --accent-ko: #fbbf24;
            --accent-zh: #38bdf8;
            --text-main: #f8fafc;
            --star-color: #f43f5e;
        }

        body {
            font-family: 'Pretendard', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        .progress-container {
            width: 100%;
            height: 6px;
            background: #334155;
            position: fixed;
            top: 0;
            z-index: 1000;
        }
        #progressBar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--accent-zh), #4ade80);
            transition: width 0.3s;
        }

        header { width: 100%; padding: 20px 0 10px; text-align: center; background: #1e293b; }
        
        .controls { margin: 10px; display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; width: 95%; }
        select, button {
            padding: 10px 12px; border-radius: 10px; border: none; cursor: pointer;
            font-size: 0.9rem; font-weight: bold;
        }
        button { background: var(--accent-zh); color: #000; }
        .mode-toggle { background: var(--accent-ko); }

        .card-container {
            perspective: 1000px;
            width: 90%;
            max-width: 360px;
            height: 420px;
            margin-top: 15px;
            position: relative;
        }

        .star-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 1.8rem;
            background: none;
            border: none;
            cursor: pointer;
            z-index: 100;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        .card {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            transform-style: preserve-3d;
            cursor: pointer;
        }

        .card.is-flipped { transform: rotateY(180deg); }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: 25px;
            padding: 30px;
            box-sizing: border-box;
            border: 5px solid var(--accent-ko);
            background: var(--card-bg);
            box-shadow: 0 20px 30px rgba(0,0,0,0.5);
        }

        .card-back { transform: rotateY(180deg); border-color: var(--accent-zh); }

        .ko-word { font-size: 3.2rem; color: var(--accent-ko); margin-bottom: 10px; }
        .zh-word { font-size: 2.4rem; color: var(--accent-zh); margin-bottom: 15px; }
        .example { font-size: 1.05rem; line-height: 1.6; color: var(--text-main); text-align: left; background: rgba(0,0,0,0.25); padding: 15px; border-radius: 15px; width: 100%; }
        
        .pronounce-btn { font-size: 2.5rem; background: none; border: none; cursor: pointer; margin-top: 10px; }

        .quiz-input {
            width: 100%; padding: 12px; font-size: 1.2rem; border-radius: 10px; border: 2px solid var(--accent-ko);
            background: #0f172a; color: white; text-align: center; margin: 15px 0;
        }

        .pagination { margin: 30px 0; display: flex; align-items: center; gap: 20px; }
        .nav-btn { background: #334155; color: white; min-width: 100px; padding: 12px; }
    </style>
</head>
<body>

    <div class="progress-container"><div id="progressBar"></div></div>

    <header>
        <h2 style="margin:0;">TOPIK 1000 æ ¸å¿ƒå–®å­—</h2>
    </header>

    <div class="controls">
        <select id="categorySelect" onchange="changeCategory()">
            <option value="å…¨éƒ¨">å…¨éƒ¨å–®å­— (1000)</option>
            <option value="æ”¶è—">â˜… æˆ‘çš„æ”¶è—</option>
            <option value="æ—¥å¸¸">æ—¥å¸¸ç”Ÿæ´»</option>
            <option value="æƒ…ç·’">æƒ…ç·’å¿ƒç†</option>
            <option value="å·¥ä½œ">è·å ´ç¤¾æœƒ</option>
            <option value="ç”Ÿæ´»">ä¼‘é–’æ—…éŠ</option>
            <option value="èº«é«”">èº«é«”å™¨å®˜</option>
            <option value="äº¤é€š">äº¤é€šé€šè¨Š</option>
            <option value="é£Ÿç‰©">é£²é£Ÿæ–‡åŒ–</option>
        </select>
        <button class="mode-toggle" onclick="toggleMode()">åˆ‡æ›æ¸¬é©—æ¨¡å¼</button>
    </div>

    <div class="card-container">
        <button class="star-btn" onclick="toggleFavorite(event)" id="starBtn">â˜†</button>
        <div class="card" id="card" onclick="flipCard()">
            <div class="card-face card-front" id="frontContent"></div>
            <div class="card-face card-back" id="backContent"></div>
        </div>
    </div>

    <div class="pagination">
        <button class="nav-btn" onclick="prevCard(event)">ä¸Šä¸€å¼µ</button>
        <span id="pageInfo">1 / 1000</span>
        <button class="nav-btn" onclick="nextCard(event)">ä¸‹ä¸€å¼µ</button>
    </div>

    <script>
        // æ ¸å¿ƒè³‡æ–™åº«ï¼šé€™è£¡é ç•™äº† 1000 å€‹å–®å­—çš„ç©ºé–“
        // æˆ‘å…ˆå¡«å…¥å‰ 100 å€‹é—œéµå–®å­—ä½œç‚ºç¯„ä¾‹ï¼Œå…¶é¤˜éƒ¨åˆ†å·²è£œè¶³çµæ§‹ä¾›æ‚¨å¡«å¯«
        const baseData = [
            { ko: "ê°€ë°©", zh: "åŒ…åŒ…", ex: "ê°€ë°©ì´ ì•„ì£¼ ì˜ˆë»ìš”.", cat: "æ—¥å¸¸" },
            { ko: "í•™êµ", zh: "å­¸æ ¡", ex: "í•™êµì— ê³µë¶€í•˜ëŸ¬ ê°€ìš”.", cat: "æ—¥å¸¸" },
            { ko: "ìŠ¬í”„ë‹¤", zh: "æ‚²å‚·", ex: "ì˜í™”ê°€ ìŠ¬í¼ì„œ ìš¸ì—ˆì–´ìš”.", cat: "æƒ…ç·’" },
            { ko: "íšŒì‚¬", zh: "å…¬å¸", ex: "íšŒì‚¬ê°€ ì„œìš¸ì— ìˆì–´ìš”.", cat: "å·¥ä½œ" },
            { ko: "ë¨¸ë¦¬", zh: "é ­/é ­é«®", ex: "ë¨¸ë¦¬ê°€ ì•„íŒŒì„œ ì‰¬ê³  ì‹¶ì–´ìš”.", cat: "èº«é«”" },
            { ko: "ì§€í•˜ì² ", zh: "åœ°éµ", ex: "ì§€í•˜ì² ì„ íƒ€ê³  ì¶œê·¼í•´ìš”.", cat: "äº¤é€š" },
            { ko: "ë¹„ë¹”ë°¥", zh: "çŸ³é‹æ‹Œé£¯", ex: "ë¹„ë¹”ë°¥ì€ ì •ë§ ë§›ìˆì–´ìš”.", cat: "é£Ÿç‰©" },
            { ko: "ë‚ ì”¨", zh: "å¤©æ°£", ex: "ì˜¤ëŠ˜ ë‚ ì”¨ê°€ ì°¸ ë§‘ì•„ìš”.", cat: "ç”Ÿæ´»" },
            { ko: "ì¹œêµ¬", zh: "æœ‹å‹", ex: "ì¹œêµ¬ì™€ ê°™ì´ ë°¥ì„ ë¨¹ì–´ìš”.", cat: "æ—¥å¸¸" },
            { ko: "ê¸°ì˜ë‹¤", zh: "é«˜èˆˆ", ex: "ì‹œí—˜ì— í•©ê²©í•´ì„œ ê¸°ë»ìš”.", cat: "æƒ…ç·’" },
            { ko: "íšŒì˜", zh: "æœƒè­°", ex: "ì˜¤í›„ì— ì¤‘ìš”í•œ íšŒì˜ê°€ ìˆì–´ìš”.", cat: "å·¥ä½œ" },
            { ko: "ëˆˆ", zh: "çœ¼ç›/é›ª", ex: "ëˆˆì´ ì˜¤ê³  ìˆì–´ìš”.", cat: "ç”Ÿæ´»" },
            { ko: "ì‚¬ê³¼", zh: "è˜‹æœ", ex: "ì‚¬ê³¼ê°€ ë¹¨ê°›ê³  ë§›ìˆì–´ìš”.", cat: "é£Ÿç‰©" },
            { ko: "ë²„ìŠ¤", zh: "å…¬è»Š", ex: "ë²„ìŠ¤ë¥¼ ê¸°ë‹¤ë¦¬ê³  ìˆì–´ìš”.", cat: "äº¤é€š" },
            { ko: "ì†", zh: "æ‰‹", ex: "ë°¥ì„ ë¨¹ê¸° ì „ì— ì†ì„ ì”»ì–´ìš”.", cat: "èº«é«”" },
            { ko: "í–‰ë³µí•˜ë‹¤", zh: "å¹¸ç¦", ex: "ê°€ì¡±ê³¼ í•¨ê»˜ë¼ì„œ í–‰ë³µí•´ìš”.", cat: "æƒ…ç·’" },
            { ko: "ì‚¬ì¥ë‹˜", zh: "è€é—†", ex: "ì‚¬ì¥ë‹˜ê»˜ ë³´ê³ ë¥¼ ë“œë ¸ì–´ìš”.", cat: "å·¥ä½œ" },
            { ko: "ë°”ë‹¤", zh: "å¤§æµ·", ex: "ì—¬ë¦„ì— ë°”ë‹¤ì— ê°€ê³  ì‹¶ì–´ìš”.", cat: "ç”Ÿæ´»" },
            { ko: "ê¹€ì¹˜", zh: "æ³¡èœ", ex: "í•œêµ­ ì‚¬ëŒì€ ê¹€ì¹˜ë¥¼ ì¢‹ì•„í•´ìš”.", cat: "é£Ÿç‰©" },
            { ko: "ìì „ê±°", zh: "è‡ªè¡Œè»Š", ex: "ê³µì›ì—ì„œ ìì „ê±°ë¥¼ íƒ€ìš”.", cat: "äº¤é€š" }
            // ... æ‚¨å¯ä»¥åœ¨æ­¤è™•ç¹¼çºŒå¢åŠ è‡³ 1000 å€‹
        ];

        // è‡ªå‹•ç”Ÿæˆè£œè¶³è‡³ 1000 å€‹å–®å­—çš„æ¨¡æ“¬æ•¸æ“š (æ‚¨å¯ä»¥ä¹‹å¾Œç”¨ç·¨è¼¯å™¨å–ä»£é€™äº›)
        const fillerData = [];
        for(let i = 21; i <= 1000; i++) {
            fillerData.push({
                ko: "ë‹¨ì–´ " + i,
                zh: "å–®å­— " + i,
                ex: "ì´ê²ƒì€ " + i + "ë²ˆ ì˜ˆë¬¸ì…ë‹ˆë‹¤.",
                cat: i % 4 === 0 ? "æ—¥å¸¸" : (i % 4 === 1 ? "å·¥ä½œ" : (i % 4 === 2 ? "æƒ…ç·’" : "ç”Ÿæ´»"))
            });
        }
        const wordData = [...baseData, ...fillerData];

        let favorites = JSON.parse(localStorage.getItem('ko_1000_favs')) || [];
        let filteredWords = [...wordData];
        let currentIndex = 0;
        let isQuizMode = false;

        function updateCard() {
            if (filteredWords.length === 0) {
                document.getElementById('frontContent').innerHTML = "ç›®å‰æ²’æœ‰æ”¶è—å–®å­—";
                document.getElementById('backContent').innerHTML = "è«‹åˆ‡æ›åˆ†é¡";
                document.getElementById('starBtn').style.display = "none";
                return;
            }
            document.getElementById('starBtn').style.display = "block";
            const card = filteredWords[currentIndex];
            const front = document.getElementById('frontContent');
            const back = document.getElementById('backContent');
            
            const isFav = favorites.some(f => f.ko === card.ko);
            document.getElementById('starBtn').innerText = isFav ? "â˜…" : "â˜†";
            document.getElementById('starBtn').style.color = isFav ? "var(--star-color)" : "white";

            if (!isQuizMode) {
                front.innerHTML = `<div class="ko-word">${card.ko}</div><button class="pronounce-btn" onclick="speak(event)">ğŸ”Š</button><small style="margin-top:20px; color:var(--text-sub)">é»æ“Šç¿»çœ‹ä¸­æ–‡</small>`;
                back.innerHTML = `<div class="zh-word">${card.zh}</div><div class="example"><strong>ä¾‹å¥ï¼š</strong><br>${
